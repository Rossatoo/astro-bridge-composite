import{r as d}from"./index.CVf8TyFT.js";var p={exports:{}},m={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b=d,w=Symbol.for("react.element"),M=Symbol.for("react.fragment"),y=Object.prototype.hasOwnProperty,R=b.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,V={key:!0,ref:!0,__self:!0,__source:!0};function j(t,e,o){var i,r={},n=null,a=null;o!==void 0&&(n=""+o),e.key!==void 0&&(n=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)y.call(e,i)&&!V.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:w,type:t,key:n,ref:a,props:r,_owner:R.current}}m.Fragment=M;m.jsx=j;m.jsxs=j;p.exports=m;var s=p.exports;class h{constructor(e){this.name=e}children=[];add(e){return this.children.push(e),this}remove(e){this.children=this.children.filter(o=>o!==e)}getChildren(){return this.children}getName(){return this.name}isLeaf(){return!1}print(e=""){const o=[`${e}+ ${this.name}/`];for(const i of this.children)o.push(i.print(e+"  "));return o.join(`
`)}}class u{constructor(e,o){this.name=e,this.device=o}getName(){return this.name}getDevice(){return this.device}isLeaf(){return!0}print(e=""){return`${e}- ${this.name}`}}class g{constructor(e="TV"){this.name=e}on=!1;volume=30;channel=1;getName(){return this.name}isEnabled(){return this.on}enable(){this.on=!0}disable(){this.on=!1}getVolume(){return this.volume}setVolume(e){this.volume=Math.max(0,Math.min(100,e))}getChannel(){return this.channel}setChannel(e){this.channel=Math.max(1,e|0)}}class _{constructor(e="Rádio"){this.name=e}on=!1;volume=20;channel=88;getName(){return this.name}isEnabled(){return this.on}enable(){this.on=!0}disable(){this.on=!1}getVolume(){return this.volume}setVolume(e){this.volume=Math.max(0,Math.min(100,e))}getChannel(){return this.channel}setChannel(e){this.channel=Math.max(80,e|0)}}class E{constructor(e="Projetor"){this.name=e}on=!1;volume=50;channel=1;getName(){return this.name}isEnabled(){return this.on}enable(){this.on=!0}disable(){this.on=!1}getVolume(){return this.volume}setVolume(e){this.volume=Math.max(0,Math.min(100,e))}getChannel(){return this.channel}setChannel(e){this.channel=Math.max(1,e|0)}}class f{constructor(e){this.device=e}setDevice(e){this.device=e}togglePower(){this.device.isEnabled()?this.device.disable():this.device.enable()}volumeDown(){this.device.setVolume(this.device.getVolume()-1)}volumeUp(){this.device.setVolume(this.device.getVolume()+1)}channelDown(){this.device.setChannel(this.device.getChannel()-1)}channelUp(){this.device.setChannel(this.device.getChannel()+1)}snapshot(){return{name:this.device.getName(),on:this.device.isEnabled(),volume:this.device.getVolume(),channel:this.device.getChannel()}}}class x extends f{mute(){this.device.setVolume(0)}macroMovieNight(){this.device.isEnabled()||this.device.enable(),this.device.setVolume(35),this.device.setChannel(12)}}function S(){const t=new h("Casa"),e=new h("Sala"),o=new h("Quarto"),i=new h("Escritório");return e.add(new u("TV da Sala",new g("TV da Sala"))).add(new u("Rádio da Sala",new _("Rádio da Sala"))),i.add(new u("Projetor",new E("Projetor"))),t.add(e).add(o).add(i),{root:t}}const N=({node:t,onPick:e,path:o=[]})=>{const i=[...o,t.getName()];if(t.isLeaf()){const n=t;return s.jsx("div",{className:"node",children:s.jsxs("div",{className:"name",children:[n.print()," ",s.jsx("button",{className:"primary",onClick:()=>e({path:i,device:n.getDevice()}),children:"Selecionar"})]})})}const r=t;return s.jsxs("div",{className:"node",children:[s.jsxs("div",{className:"name",children:["+ ",r.getName(),"/"]}),s.jsx("div",{style:{marginLeft:12},children:r.getChildren().map((n,a)=>s.jsx(N,{node:n,onPick:e,path:i},a))})]})},D=()=>{const{root:t}=d.useMemo(S,[]),[e,o]=d.useState("advanced"),[i,r]=d.useState(void 0),n=d.useMemo(()=>{const l=i??new g("TV (temporária)");return e==="advanced"?new x(l):new f(l)},[e,i]),[a,v]=d.useState(n.snapshot()),c=l=>{l(),v(n.snapshot())};d.useEffect(()=>{v(n.snapshot())},[n]);const C=l=>{r(l.device)};return s.jsxs("div",{className:"grid",children:[s.jsxs("section",{className:"panel",children:[s.jsx("h3",{children:"Árvore de dispositivos (Composite)"}),s.jsx("div",{className:"tree",children:s.jsx(N,{node:t,onPick:C})}),s.jsxs("p",{className:"small",children:[s.jsx("strong",{children:"Composite:"})," ",s.jsx("code",{className:"code",children:"MenuGroup"})," (Composite) contém"," ",s.jsx("code",{className:"code",children:"MenuComponent"})," que podem ser ",s.jsx("code",{className:"code",children:"MenuItem"})," (Leaf) ou outros"," ",s.jsx("code",{className:"code",children:"MenuGroup"}),"."]})]}),s.jsxs("section",{className:"panel",children:[s.jsx("h3",{children:"Controles (Bridge)"}),s.jsxs("div",{className:"row",style:{marginBottom:10},children:[s.jsx("label",{children:"Controle: "}),s.jsxs("select",{className:"select",onChange:l=>o(l.target.value),value:e,children:[s.jsx("option",{value:"basic",children:"Básico (Remote)"}),s.jsx("option",{value:"advanced",children:"Avançado (AdvancedRemote)"})]})]}),s.jsxs("div",{className:"btns",style:{marginBottom:10},children:[s.jsx("button",{onClick:()=>c(()=>n.togglePower()),children:"Power"}),s.jsx("button",{onClick:()=>c(()=>n.volumeDown()),children:"Vol −"}),s.jsx("button",{onClick:()=>c(()=>n.volumeUp()),children:"Vol +"}),s.jsx("button",{onClick:()=>c(()=>n.channelDown()),children:"Canal −"}),s.jsx("button",{onClick:()=>c(()=>n.channelUp()),children:"Canal +"}),n instanceof x&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>c(()=>n.mute()),children:"Mute"}),s.jsx("button",{onClick:()=>c(()=>n.macroMovieNight()),children:"Movie Night"})]})]}),s.jsxs("div",{className:"code",style:{marginBottom:8},children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Device:"})," ",a.name]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Ligado:"})," ",s.jsx("span",{className:"state "+(a.on?"ok":"err"),children:a.on?"SIM":"NÃO"})]}),s.jsxs("div",{style:{marginTop:6},children:[s.jsx("strong",{children:"Volume:"})," ",a.volume,s.jsx("div",{className:"meter",children:s.jsx("div",{style:{width:`${Math.max(0,Math.min(100,a.volume))}%`}})})]}),s.jsxs("div",{style:{marginTop:6},children:[s.jsx("strong",{children:"Canal:"})," ",a.channel]})]}),s.jsxs("p",{className:"small",children:[s.jsx("strong",{children:"Bridge:"})," ",s.jsx("code",{className:"code",children:"Remote"})," (Abstraction) invoca operações de"," ",s.jsx("code",{className:"code",children:"Device"})," (Implementor) sem conhecer detalhes de TV/Rádio/Projetor."," ",s.jsx("code",{className:"code",children:"AdvancedRemote"})," (RefinedAbstraction) adiciona recursos (mute/macro)."]})]})]})};export{D as default};
